(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,n=window.wp.element,o=window.wp.data,c=window.wp.i18n,r=(window.wp.date,e=>{if(!e)return"";const[t,a]=e.split(":");let n=parseInt(t);const o=n>=12?"PM":"AM";return n%=12,n=n||12,`${n}:${a} ${o}`}),s=window.ReactJSXRuntime,i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"evt/event-item","version":"0.1.0","title":"Event Item","category":"widgets","icon":"calendar","description":"Event Item Card","textdomain":"events","parent":["evt/events-grid"],"providesContext":{"evt/eventDate":"eventDate","evt/eventStartTime":"eventStartTime","evt/eventEndTime":"eventEndTime"},"attributes":{"evtBlockId":{"type":"string","default":""},"eventImage":{"type":"string","default":""},"eventImageAlt":{"type":"string","default":""},"eventDate":{"type":"string"},"eventStartTime":{"type":"string","default":"09:00"},"eventEndTime":{"type":"string","default":"17:00"},"detailsBackgroundColor":{"type":"string","default":"#ffffff"},"isDefault":{"type":"boolean","default":false},"hasImage":{"type":"boolean","default":false},"mediaBlock":{"type":"boolean","default":false}},"editorScript":"file:./index.js"}');(0,e.registerBlockType)(i.name,{...i,edit:function({attributes:i,setAttributes:l,clientId:d}){const{evtBlockId:v,eventImage:m,eventImageAlt:p,eventDate:g,eventStartTime:u,eventEndTime:k,detailsBackgroundColor:h,isDefault:b,hasImage:f,mediaBlock:B}=i;(0,n.useEffect)(()=>{if(!v){const e=d.substring(0,8);l({evtBlockId:e})}},[]),(0,n.useEffect)(()=>{if(!v)return;const e=document.getElementById(`evt-block-style-${v}`);e&&e.remove();const t=document.createElement("style");return t.id=`evt-block-style-${v}`,t.innerHTML=`\n\t\t\t.evt-block-${v} .evt-event-details {\n\t\t\t\tbackground-color: ${h};\n\t\t\t}\n\t\t`,document.head.appendChild(t),()=>{const e=document.getElementById(`evt-block-style-${v}`);e&&e.remove()}},[v,h]);const N=(0,o.useSelect)(e=>{const t=e("core/block-editor").getBlock(d)?.innerBlocks||[];if(t.find(e=>"core/image"===e.name))return!0;const a=t.find(e=>"core/group"===e.name&&e.attributes?.className?.includes("evt-event-image-wrap"));return!!(a&&a.innerBlocks&&a.innerBlocks.find(e=>"core/image"===e.name))},[d]),w=t=>{if(t){const t=(0,e.createBlock)("core/group",{className:"evt-event-image-wrap"},[(0,e.createBlock)("core/image",{className:"evt-event-image-block"})]);(0,o.dispatch)("core/block-editor").insertBlocks(t,0,d),l({mediaBlock:!0,hasImage:!0}),setTimeout(()=>{const e=((0,o.select)("core/block-editor").getBlock(d)?.innerBlocks||[])[0];e&&e.innerBlocks&&e.innerBlocks[0]&&(0,o.dispatch)("core/block-editor").selectBlock(e.innerBlocks[0].clientId)},50)}else{const e=(0,o.select)("core/block-editor").getBlock(d)?.innerBlocks||[],t=e.find(e=>"core/group"===e.name&&e.attributes?.className?.includes("evt-event-image-wrap"));if(t)(0,o.dispatch)("core/block-editor").removeBlock(t.clientId);else{const t=e.find(e=>"core/image"===e.name);t&&(0,o.dispatch)("core/block-editor").removeBlock(t.clientId)}l({mediaBlock:!1,eventImage:"",eventImageAlt:"",hasImage:!1})}},I=(0,t.useBlockProps)({className:"evt-event-item"+(v?` evt-block-${v}`:"")}),x=[{title:"Crazy DJ Experience Santa Cruz",time:"9:00 AM - 5:00 PM",location:"JW Marriott, Sector 35",price:"$25.00"},{title:"Cute Girls Rock Band Performance",time:"9:00 AM - 5:00 PM",location:"Club XYZ, Sector 17",price:"$20.00"},{title:"Free Food Distribution At Mumbai",time:"9:00 AM - 5:00 PM",location:"Food Corp. Mumbai, Ft. Line",price:"No Cost"}],y=b?p.includes("DJ")?x[0]:p.includes("Rock")?x[1]:p.includes("Food")?x[2]:null:null,j=`${r(u)} – ${r(k)}`,S=b&&y?[["core/group",{className:"evt-event-image-wrap"},[["core/image",{url:m,alt:p,className:"evt-event-image-block"}]]],["core/group",{className:"evt-card-details"},[["evt/event-date-badge",{eventDate:g,isDateSet:!0}],["core/group",{className:"evt-event-detail"},[["core/paragraph",{className:"evt-event-time",content:j,evtStartTime:u,evtEndTime:k,evtIsTimeSet:!0}],["core/heading",{level:4,className:"evt-event-title",content:y?.title||""}],["core/paragraph",{placeholder:(0,c.__)("Event Description","events"),className:"evt-event-description"}],["core/paragraph",{className:"evt-event-location",content:y?.location||""}],["core/group",{className:"evt-price-read-more"},[["core/paragraph",{className:"evt-event-price",content:y?.price||""}],["core/buttons",{},[["core/button",{text:"Read More",className:"evt-event-read-more",url:""}]]]]]]]]]]:[["core/group",{className:"evt-event-image-wrap"},[["core/image",{className:"evt-event-image-block"}]]],["core/group",{className:"evt-card-details"},[["evt/event-date-badge",{eventDate:g,isDateSet:!1}],["core/group",{className:"evt-event-detail"},[["core/paragraph",{placeholder:(0,c.__)("9:00 AM – 5:00 PM","events"),className:"evt-event-time",evtStartTime:u,evtEndTime:k,evtIsTimeSet:!1}],["core/heading",{level:4,placeholder:(0,c.__)("Event Title","events"),className:"evt-event-title"}],["core/paragraph",{placeholder:(0,c.__)("Event Description","events"),className:"evt-event-description"}],["core/paragraph",{placeholder:(0,c.__)("Event Location","events"),className:"evt-event-location"}],["core/group",{className:"evt-price-read-more"},[["core/paragraph",{placeholder:(0,c.__)("Event Price","events"),className:"evt-event-price"}],["core/buttons",{},[["core/button",{text:(0,c.__)("Read More","events"),className:"evt-event-read-more",url:""}]]]]]]]]]];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.InspectorControls,{children:(0,s.jsx)(a.PanelBody,{title:(0,c.__)("Event Settings","events"),children:(0,s.jsx)(a.PanelRow,{children:(0,s.jsxs)("div",{style:{width:"100%",marginTop:"16px"},children:[(0,s.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:(0,c.__)("Details Background Color","events")}),(0,s.jsx)(t.ColorPalette,{value:h,onChange:e=>l({detailsBackgroundColor:e||"#ffffff"})})]})})})}),(0,s.jsx)("div",{...I,children:(0,s.jsxs)("div",{className:"evt-event-card",children:[!N&&(0,s.jsx)("div",{className:"evt-add-image-block",children:(0,s.jsx)(a.Button,{isSmall:!0,isSecondary:!0,onClick:()=>w(!0),children:(0,c.__)("Add Image Block","events")})}),N&&(0,s.jsx)("div",{className:"evt-add-image-block",children:(0,s.jsx)(a.Button,{isSmall:!0,isSecondary:!0,onClick:()=>w(!1),children:(0,c.__)("Remove Image Block","events")})}),(0,s.jsx)("div",{className:"evt-event-details",children:(0,s.jsx)("div",{className:"evt-event-details-inner",children:(0,s.jsx)(t.InnerBlocks,{template:S,templateLock:!1,allowedBlocks:["core/group","core/image","evt/event-date-badge","core/heading","core/paragraph","core/list","core/buttons","core/button"]})})})]})})]})},save:function({attributes:e}){const{evtBlockId:a}=e,n=t.useBlockProps.save({className:"evt-event-item"+(a?` evt-block-${a}`:"")});return(0,s.jsx)("div",{...n,children:(0,s.jsx)("div",{className:"evt-event-card",children:(0,s.jsx)("div",{className:"evt-event-details",children:(0,s.jsx)("div",{className:"evt-event-details-inner",children:(0,s.jsx)(t.InnerBlocks.Content,{})})})})})}})})();