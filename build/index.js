(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,n=window.wp.components,l=window.wp.i18n,r=window.wp.date,o=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},(0,e.createElement)("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M19.5,19c0,0.3-0.2,0.5-0.5,0.5H5 c-0.3,0-0.5-0.2-0.5-0.5V7h15V19z M17,13h-4v4h4V13z"}));(0,t.registerBlockType)("evt/events-grid",{title:(0,l.__)("Events Grid","event"),description:(0,l.__)("Display multiple events in a modern grid layout","event"),icon:o,category:"widgets",supports:{align:["wide","full"],html:!1},attributes:{columns:{type:"number",default:3}},edit:({attributes:t,setAttributes:r})=>{const o=(0,a.useBlockProps)({className:"evt-events-grid-container"});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Grid Settings","event")},(0,e.createElement)(n.TextControl,{label:(0,l.__)("Columns","event"),type:"number",value:t.columns,onChange:e=>r({columns:parseInt(e)}),min:1,max:4,help:(0,l.__)("Number of columns in the grid (1-4)","event")}))),(0,e.createElement)("div",{...o,style:{"--columns":t.columns}},(0,e.createElement)(a.InnerBlocks,{allowedBlocks:["evt/event-item"],template:[["evt/event-item",{eventTitle:"Crazy DJ Experience Santa Cruz",eventLocation:"JW Marriott, Sector 35",eventDate:"2024-06-06T16:00:00",eventPrice:"$25.00",eventDay:"FRI",eventImageURL:"https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=800"}],["evt/event-item",{eventTitle:"Cute Girls Rock Band Performance",eventLocation:"Club XYZ, Sector 17",eventDate:"2024-10-02T18:30:00",eventPrice:"$20.00",eventDay:"THU",eventImageURL:"https://images.unsplash.com/photo-1511735111819-9a3f7709049c?w=800"}],["evt/event-item",{eventTitle:"Free Food Distribution At Mumbai",eventLocation:"Food Corp. Mumbai, Ft. Line",eventDate:"2024-11-03T19:00:00",eventPrice:"$15.00",eventDay:"MON",eventImageURL:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800"}]],renderAppender:()=>(0,e.createElement)(a.InnerBlocks.ButtonBlockAppender,null)})))},save:({attributes:t})=>{const n=a.useBlockProps.save({className:"evt-events-grid-container",style:{"--columns":t.columns}});return(0,e.createElement)("div",{...n},(0,e.createElement)(a.InnerBlocks.Content,null))}}),(0,t.registerBlockType)("evt/event-item",{title:(0,l.__)("Event Item","event"),description:(0,l.__)("Single event card with image, date, and details","event"),icon:o,category:"widgets",parent:["evt/events-grid"],supports:{reusable:!1,html:!1},attributes:{eventTitle:{type:"string",default:""},eventLocation:{type:"string",default:""},eventDate:{type:"string",default:""},eventEndDate:{type:"string",default:""},eventPrice:{type:"string",default:""},eventDay:{type:"string",default:""},eventImageURL:{type:"string",default:""},eventImageID:{type:"number"},eventImageAlt:{type:"string",default:""},detailsBackgroundColor:{type:"string",default:"#ffffff"},borderBadgeColor:{type:"string",default:"#00000040"},dateBadgeBackgroundColor:{type:"string",default:"#2667FF"},dateBadgeTextColor:{type:"string",default:"#ffffff"},detailsTextColor:{type:"string",default:"#1a1a1a"}},edit:({attributes:t,setAttributes:o})=>{const i=(0,a.useBlockProps)({className:"evt-event-item"}),{eventTitle:c,eventLocation:m,eventDate:s,eventEndDate:d,eventPrice:v,eventDay:g,eventImageURL:u,eventImageID:p,eventImageAlt:y,detailsBackgroundColor:E,borderBadgeColor:h,dateBadgeBackgroundColor:C,dateBadgeTextColor:b,detailsTextColor:B}=t,f=(e=>{if(!e)return{month:"",day:"",time:"",dayName:""};try{return new Date(e),{month:(0,r.dateI18n)("M",e),day:(0,r.dateI18n)("d",e),time:(0,r.dateI18n)("g:i a",e),dayName:(0,r.dateI18n)("D",e).toUpperCase()}}catch(e){return{month:"",day:"",time:"",dayName:""}}})(s);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Event Details","event")},(0,e.createElement)("div",{style:{marginBottom:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,l.__)("Start Date & Time","event")),(0,e.createElement)(n.DateTimePicker,{currentDate:s||(new Date).toISOString(),onChange:e=>{o({eventDate:e});const t=(0,r.dateI18n)("D",e).toUpperCase();o({eventDay:t})}})),(0,e.createElement)("div",{style:{marginBottom:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,l.__)("End Date & Time","event")),(0,e.createElement)(n.DateTimePicker,{currentDate:d||s||(new Date).toISOString(),onChange:e=>o({eventEndDate:e})})),(0,e.createElement)(n.TextControl,{label:(0,l.__)("Price","event"),value:v,onChange:e=>o({eventPrice:e}),placeholder:"$25.00"}),(0,e.createElement)(n.TextControl,{label:(0,l.__)("Day Label","event"),value:g||f.dayName,onChange:e=>o({eventDay:e}),help:(0,l.__)("e.g., MON, TUE, FRI","event")})),(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Color Settings","event"),initialOpen:!1},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,l.__)("Container Background Color","event")),(0,e.createElement)(a.ColorPalette,{value:E,onChange:e=>o({detailsBackgroundColor:e||"#ffffff"})}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,l.__)("Date Border Color","event")),(0,e.createElement)(a.ColorPalette,{value:h,onChange:e=>o({borderBadgeColor:e||"#00000040"})}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,l.__)("Date Background Color","event")),(0,e.createElement)(a.ColorPalette,{value:C,onChange:e=>o({dateBadgeBackgroundColor:e||"#2667FF"})}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,l.__)("Date Text Color","event")),(0,e.createElement)(a.ColorPalette,{value:b,onChange:e=>o({dateBadgeTextColor:e||"#ffffff"})}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,l.__)("Details Text Color","event")),(0,e.createElement)(a.ColorPalette,{value:B,onChange:e=>o({detailsTextColor:e||"#1a1a1a"})})))),(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Image Settings","event"),initialOpen:!1},(0,e.createElement)(a.MediaUploadCheck,null,(0,e.createElement)(a.MediaUpload,{onSelect:e=>{o({eventImageURL:e.url,eventImageID:e.id,eventImageAlt:e.alt})},allowedTypes:["image"],value:p,render:({open:t})=>(0,e.createElement)(n.Button,{onClick:t,variant:"secondary",style:{marginBottom:"10px",width:"100%"}},u?(0,l.__)("Change Image","event"):(0,l.__)("Upload Image","event"))})),u&&(0,e.createElement)(n.Button,{onClick:()=>o({eventImageURL:"",eventImageID:null,eventImageAlt:""}),variant:"secondary",isDestructive:!0,style:{width:"100%"}},(0,l.__)("Remove Image","event")))),(0,e.createElement)("div",{...i},(0,e.createElement)("div",{className:"evt-event-card"},(0,e.createElement)("div",{className:"evt-event-image"},u?(0,e.createElement)("img",{src:u,alt:y||c}):(0,e.createElement)("div",{className:"evt-event-image-placeholder"},(0,e.createElement)(a.MediaUploadCheck,null,(0,e.createElement)(a.MediaUpload,{onSelect:e=>{o({eventImageURL:e.url,eventImageID:e.id,eventImageAlt:e.alt})},allowedTypes:["image"],value:p,render:({open:t})=>(0,e.createElement)(n.Button,{onClick:t,variant:"primary"},(0,l.__)("Add Image","event"))})))),(0,e.createElement)("div",{className:"evt-event-details",style:{backgroundColor:E}},(0,e.createElement)("div",{className:"evt-event-date-badge-container",style:{color:b}},s&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"evt-border-badge",style:{borderColor:h}},(0,e.createElement)("div",{className:"evt-event-date-badge",style:{backgroundColor:C}},(0,e.createElement)("span",{className:"evt-date-day"},f.day),(0,e.createElement)("span",{className:"evt-date-month"},f.month))),(0,e.createElement)("span",{className:"evt-date-weekday"},g||f.dayName))),(0,e.createElement)("div",{className:"evt-event-details-inner"},s&&(0,e.createElement)("div",{className:"evt-event-time",style:{color:B}},(0,e.createElement)("span",{className:"evt-time-icon"},"üïê"),(0,e.createElement)("span",null,f.time,d&&` - ${(0,r.dateI18n)("g:i a",d)}`)),(0,e.createElement)(a.RichText,{tagName:"h4",className:"evt-event-title",value:c,onChange:e=>o({eventTitle:e}),placeholder:(0,l.__)("Event Title","event"),style:{color:B}}),(0,e.createElement)(a.RichText,{tagName:"div",className:"evt-event-location",value:m,onChange:e=>o({eventLocation:e}),placeholder:(0,l.__)("Event Location","event"),style:{color:B}}),v&&(0,e.createElement)("div",{className:"evt-event-price",style:{color:B}},v))))))},save:({attributes:t})=>{const n=a.useBlockProps.save({className:"evt-event-item"}),{eventTitle:l,eventLocation:o,eventDate:i,eventEndDate:c,eventPrice:m,eventDay:s,eventImageURL:d,eventImageAlt:v,detailsBackgroundColor:g,borderBadgeColor:u,dateBadgeBackgroundColor:p,dateBadgeTextColor:y,detailsTextColor:E}=t,h=(e=>{if(!e)return{month:"",day:"",time:"",dayName:""};try{return{month:(0,r.dateI18n)("M",e),day:(0,r.dateI18n)("d",e),time:(0,r.dateI18n)("g:i a",e),dayName:(0,r.dateI18n)("D",e).toUpperCase()}}catch(e){return{month:"",day:"",time:"",dayName:""}}})(i),C=c?(0,r.dateI18n)("g:i a",c):"";return(0,e.createElement)("div",{...n},(0,e.createElement)("div",{className:"evt-event-card"},d&&(0,e.createElement)("div",{className:"evt-event-image"},(0,e.createElement)("img",{src:d,alt:v||l})),(0,e.createElement)("div",{className:"evt-event-details",style:{backgroundColor:g}},(0,e.createElement)("div",{className:"evt-event-date-badge-container",style:{color:y}},i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"evt-border-badge",style:{borderColor:u}},(0,e.createElement)("div",{className:"evt-event-date-badge",style:{backgroundColor:p}},(0,e.createElement)("span",{className:"evt-date-day"},h.day),(0,e.createElement)("span",{className:"evt-date-month"},h.month))),(0,e.createElement)("span",{className:"evt-date-weekday"},s||h.dayName))),(0,e.createElement)("div",{className:"evt-event-details-inner"},i&&(0,e.createElement)("div",{className:"evt-event-time",style:{color:E}},(0,e.createElement)("span",{className:"evt-time-icon"},"üïê"),(0,e.createElement)("span",null,h.time,C&&` - ${C}`)),l&&(0,e.createElement)(a.RichText.Content,{tagName:"h4",className:"evt-event-title",value:l,style:{color:E}}),o&&(0,e.createElement)(a.RichText.Content,{tagName:"div",className:"evt-event-location",value:o,style:{color:E}}),m&&(0,e.createElement)("div",{className:"evt-event-price",style:{color:E}},m)))))}})})();