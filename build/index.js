(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,n=window.wp.components,r=window.wp.i18n,o=window.wp.date,l=()=>{const e=new Date;return(0,o.dateI18n)("Y-m-d",e)},c=e=>{if(!e)return"";const[t,a]=e.split(":");let n=parseInt(t);const r=n>=12?"PM":"AM";return n%=12,n=n||12,`${n}:${a} ${r}`},s=JSON.parse('{"UU":"evt/events-grid"}');(0,t.registerBlockType)(s.UU,{edit:({attributes:t,setAttributes:o})=>{const{columns:l}=t,c=(0,a.useBlockProps)({className:"evt-events-grid-container",style:{"--grid-columns":l}}),s=window.evtPluginData&&window.evtPluginData.images?[window.evtPluginData.images.crazyDJ||"",window.evtPluginData.images.rockBand||"",window.evtPluginData.images.foodDistribution||""]:["","",""];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,r.__)("Grid Settings","events")},(0,e.createElement)(n.__experimentalNumberControl,{label:(0,r.__)("Columns","events"),value:l,onChange:e=>o({columns:parseInt(e)||2}),min:1,max:3,help:(0,r.__)("Number of columns in the grid (1-3)","evt"),__next40pxDefaultSize:!0}))),(0,e.createElement)("div",{...c},(0,e.createElement)(a.InnerBlocks,{allowedBlocks:["evt/event-item"],template:[["evt/event-item",{eventImage:s[0],eventImageAlt:"Crazy DJ Experience Santa Cruz",eventDate:"0001-01-06",isDefault:!0,hasImage:!0}],["evt/event-item",{eventImage:s[1],eventImageAlt:"Cute Girls Rock Band Performance",eventDate:"0001-04-04",isDefault:!0,hasImage:!0}],["evt/event-item",{eventImage:s[2],eventImageAlt:"Free Food Distribution At Mumbai",eventDate:"0001-06-08",isDefault:!0,hasImage:!0}]],renderAppender:()=>(0,e.createElement)(a.InnerBlocks.ButtonBlockAppender,null)})))},save:({attributes:t})=>{const{columns:n}=t,r=a.useBlockProps.save({className:"evt-events-grid-container evt-front-view",style:{"--columns":n}});return(0,e.createElement)("div",{...r},(0,e.createElement)(a.InnerBlocks.Content,null))}});const i=window.wp.element,d=window.wp.data,m=window.wp.hooks,v=window.wp.compose,g=JSON.parse('{"UU":"evt/event-item"}');(0,t.registerBlockType)(g.UU,{edit:({attributes:e,setAttributes:o,clientId:s})=>{const{evtBlockId:m,eventImage:v,eventImageAlt:g,eventDate:u,eventStartTime:p,eventEndTime:k,detailsBackgroundColor:E,isDefault:b,hasImage:B,mediaBlock:y}=e;(0,i.useEffect)(()=>{if(!m){const e=s.substring(0,8);o({evtBlockId:e})}},[]),(0,i.useEffect)(()=>{u||b||o({eventDate:l()})},[]);const f=(0,d.useSelect)(e=>{const t=e("core/block-editor").getBlock(s)?.innerBlocks||[];if(t.find(e=>"core/image"===e.name))return!0;const a=t.find(e=>"core/group"===e.name&&e.attributes?.className?.includes("evt-event-image-wrap"));return!!(a&&a.innerBlocks&&a.innerBlocks.find(e=>"core/image"===e.name))},[s]),h=e=>{if(e){const e=(0,t.createBlock)("core/group",{className:"evt-event-image-wrap"},[(0,t.createBlock)("core/image",{className:"evt-event-image-block"})]);(0,d.dispatch)("core/block-editor").insertBlocks(e,0,s),o({mediaBlock:!0,hasImage:!0}),setTimeout(()=>{const e=((0,d.select)("core/block-editor").getBlock(s)?.innerBlocks||[])[0];e&&e.innerBlocks&&e.innerBlocks[0]&&(0,d.dispatch)("core/block-editor").selectBlock(e.innerBlocks[0].clientId)},50)}else{const e=(0,d.select)("core/block-editor").getBlock(s)?.innerBlocks||[],t=e.find(e=>"core/group"===e.name&&e.attributes?.className?.includes("evt-event-image-wrap"));if(t)(0,d.dispatch)("core/block-editor").removeBlock(t.clientId);else{const t=e.find(e=>"core/image"===e.name);t&&(0,d.dispatch)("core/block-editor").removeBlock(t.clientId)}o({mediaBlock:!1,eventImage:"",eventImageAlt:"",hasImage:!1})}},w=(0,a.useBlockProps)({className:"evt-event-item"+(m?` evt-block-${m}`:"")}),N=[{title:"Crazy DJ Experience Santa Cruz",time:"9:00 AM - 5:00 PM",location:"JW Marriott, Sector 35",price:"$25.00"},{title:"Cute Girls Rock Band Performance",time:"9:00 AM - 5:00 PM",location:"Club XYZ, Sector 17",price:"$20.00"},{title:"Free Food Distribution At Mumbai",time:"9:00 AM - 5:00 PM",location:"Food Corp. Mumbai, Ft. Line",price:"No Cost"}],I=b?g.includes("DJ")?N[0]:g.includes("Rock")?N[1]:g.includes("Food")?N[2]:null:null,C=`${c(p)} – ${c(k)}`,_=b&&I?[["core/group",{className:"evt-event-image-wrap"},[["core/image",{url:v,alt:g,className:"evt-event-image-block"}]]],["core/group",{className:"evt-card-details"},[["evt/event-date-badge",{eventDate:u,isDateSet:!0}],["core/group",{className:"evt-event-detail"},[["core/paragraph",{className:"evt-event-time",content:C,evtStartTime:p,evtEndTime:k,evtIsTimeSet:!0}],["core/heading",{level:4,className:"evt-event-title",content:I?.title||""}],["core/paragraph",{placeholder:(0,r.__)("Event Description","events"),className:"evt-event-description"}],["core/paragraph",{className:"evt-event-location",content:I?.location||""}],["core/group",{className:"evt-price-read-more"},[["core/paragraph",{className:"evt-event-price",content:I?.price||""}],["core/buttons",{},[["core/button",{text:"Read More",className:"evt-event-read-more",url:""}]]]]]]]]]]:[["core/group",{className:"evt-event-image-wrap"},[["core/image",{className:"evt-event-image-block"}]]],["core/group",{className:"evt-card-details"},[["evt/event-date-badge",{eventDate:u,isDateSet:!0}],["core/group",{className:"evt-event-detail"},[["core/paragraph",{placeholder:(0,r.__)("9:00 AM – 5:00 PM","events"),className:"evt-event-time",evtStartTime:p,evtEndTime:k,evtIsTimeSet:!1}],["core/heading",{level:4,placeholder:(0,r.__)("Event Title","events"),className:"evt-event-title"}],["core/paragraph",{placeholder:(0,r.__)("Event Description","events"),className:"evt-event-description"}],["core/paragraph",{placeholder:(0,r.__)("Event Location","events"),className:"evt-event-location"}],["core/group",{className:"evt-price-read-more"},[["core/paragraph",{placeholder:(0,r.__)("Event Price","events"),className:"evt-event-price"}],["core/buttons",{},[["core/button",{text:(0,r.__)("Read More","events"),className:"evt-event-read-more",url:""}]]]]]]]]]];return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(a.InspectorControls,null,(0,i.createElement)(n.PanelBody,{title:(0,r.__)("Event Settings","events")},(0,i.createElement)(n.PanelRow,null,(0,i.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,i.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,r.__)("Details Background Color","events")),(0,i.createElement)(a.ColorPalette,{value:E,onChange:e=>o({detailsBackgroundColor:e||"#ffffff"})}))))),(0,i.createElement)("div",{...w},(0,i.createElement)("div",{className:"evt-event-card"},!f&&(0,i.createElement)("div",{className:"evt-add-image-block"},(0,i.createElement)(n.Button,{isSmall:!0,isSecondary:!0,onClick:()=>h(!0)},(0,r.__)("Add Image Block","events"))),f&&(0,i.createElement)("div",{className:"evt-add-image-block"},(0,i.createElement)(n.Button,{isSmall:!0,isSecondary:!0,onClick:()=>h(!1)},(0,r.__)("Remove Image Block","events"))),(0,i.createElement)("div",{className:"evt-event-details",style:{"--evt-details-bg":E||"#ffffff"}},(0,i.createElement)("div",{className:"evt-event-details-inner"},(0,i.createElement)(a.InnerBlocks,{template:_,templateLock:!1,allowedBlocks:["core/group","core/image","evt/event-date-badge","core/heading","core/paragraph","core/list","core/buttons","core/button"],renderAppender:!1}))))))},save:({attributes:e})=>{const{evtBlockId:t,detailsBackgroundColor:n}=e,r=a.useBlockProps.save({className:"evt-event-item"+(t?` evt-block-${t}`:""),style:{"--evt-details-bg":n||"#ffffff"}});return(0,i.createElement)("div",{...r},(0,i.createElement)("div",{className:"evt-event-details-inner"},(0,i.createElement)(a.InnerBlocks.Content,null)))}}),(0,m.addFilter)("blocks.registerBlockType","evt/paragraph-time-attributes",(e,t)=>"core/paragraph"!==t?e:{...e,attributes:{...e.attributes,evtStartTime:{type:"string",default:"09:00"},evtEndTime:{type:"string",default:"17:00"},evtIsTimeSet:{type:"boolean",default:!1}}});const u=(0,v.createHigherOrderComponent)(e=>t=>{const{attributes:o,setAttributes:l,name:s}=t;if("core/paragraph"!==s||!o.className||!o.className.includes("evt-event-time"))return(0,i.createElement)(e,t);const{evtStartTime:m,evtEndTime:v,evtIsTimeSet:g}=o,u=(0,d.useSelect)(e=>{const{getBlockParents:a,getBlock:n}=e("core/block-editor"),r=a(t.clientId);for(let e of r){const t=n(e);if(t&&"evt/event-item"===t.name)return{clientId:e,startTime:t.attributes.eventStartTime||"09:00",endTime:t.attributes.eventEndTime||"17:00"}}return null},[t.clientId]),p=u?.startTime||m,k=u?.endTime||v,E=(e,t)=>{const a=`${c(e)} – ${c(t)}`;l({content:a})};return(0,i.useEffect)(()=>{u&&g&&E(p,k)},[u?.startTime,u?.endTime]),(0,i.createElement)(i.Fragment,{},(0,i.createElement)(e,t),(0,i.createElement)(a.InspectorControls,{},(0,i.createElement)(n.PanelBody,{title:(0,r.__)("Time Settings","events"),className:"evt-time-settings"},(0,i.createElement)("div",{className:"evt-start-time-input"},(0,i.createElement)("strong",{},(0,r.__)("Start Time","events")),(0,i.createElement)("input",{type:"time",value:p,onChange:e=>{return t=e.target.value,l({evtStartTime:t,evtIsTimeSet:!0}),u&&(0,d.dispatch)("core/block-editor").updateBlockAttributes(u.clientId,{eventStartTime:t}),void E(t,k);var t},onClick:e=>{e.target.showPicker&&e.target.showPicker()}})),(0,i.createElement)("div",{className:"evt-end-time-input"},(0,i.createElement)("strong",{},(0,r.__)("End Time","events")),(0,i.createElement)("input",{type:"time",value:k,onChange:e=>{return t=e.target.value,l({evtEndTime:t,evtIsTimeSet:!0}),u&&(0,d.dispatch)("core/block-editor").updateBlockAttributes(u.clientId,{eventEndTime:t}),void E(p,t);var t},onClick:e=>{e.target.showPicker&&e.target.showPicker()}})))))},"withTimeSettings");(0,m.addFilter)("editor.BlockEdit","evt/paragraph-time-settings",u);const p=JSON.parse('{"UU":"evt/event-date-badge"}');(0,t.registerBlockType)(p.UU,{edit:({attributes:t,setAttributes:c,context:s,clientId:m})=>{const{evtBadgeId:v,eventDate:g,isDateSet:u,hideYear:p,dateBadgeBackgroundColor:k,dateBadgeTextColor:E,borderBadgeColor:b,weekdayColor:B}=t;(0,i.useEffect)(()=>{if(!v){const e=m.substring(0,8);c({evtBadgeId:e})}},[]),(0,i.useEffect)(()=>{g||s["evt/eventDate"]||c({eventDate:l()})},[]);const y=s["evt/eventDate"]||g||l(),f=(0,d.useSelect)(e=>{const{getBlockParents:t,getBlock:a}=e("core/block-editor"),n=t(m);for(let e of n){const t=a(e);if(t&&"evt/event-item"===t.name)return e}return null},[m]);(0,i.useEffect)(()=>{s["evt/eventDate"]&&s["evt/eventDate"]!==g&&c({eventDate:s["evt/eventDate"]})},[s["evt/eventDate"]]);const h=(0,a.useBlockProps)({className:"evt-event-date-badge-container"+(v?` evt-badge-${v}`:""),style:{"--evt-badge-bg":k,"--evt-badge-text":E,"--evt-badge-border":b,"--evt-badge-weekday":B}}),w=(e=>{if(!e)return{day:"01",month:"Jan",year:"0001",weekday:"MON"};try{const t=new Date(e);return{day:(0,o.dateI18n)("d",t),month:(0,o.dateI18n)("M",t),year:(0,o.dateI18n)("Y",t),weekday:(0,o.dateI18n)("D",t).toUpperCase()}}catch(e){return{day:"01",month:"Jan",year:"0001",weekday:"MON"}}})(y);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(n.PanelBody,{className:"evt-date-settings",title:(0,r.__)("Date Settings","events")},(0,e.createElement)("div",{style:{marginBottom:"15px"}},(0,e.createElement)("strong",null,(0,r.__)("Event Date","events")),(0,e.createElement)(n.DateTimePicker,{currentDate:y,onChange:e=>{c({eventDate:e,isDateSet:!0}),f&&(0,d.dispatch)("core/block-editor").updateBlockAttributes(f,{eventDate:e})},is12Hour:!0})),(0,e.createElement)("p",{style:{fontSize:"13px",color:"#FF0000",marginBottom:"10px"}},(0,e.createElement)("strong",null,(0,r.__)("Note:","events"))," ",(0,r.__)("To hide the year, simply set the year value to 0001 in the year section.","events"))),(0,e.createElement)(n.PanelBody,{title:(0,r.__)("Date Colors","events"),initialOpen:!1},(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,r.__)("Background Color","events")),(0,e.createElement)(a.ColorPalette,{value:k,onChange:e=>c({dateBadgeBackgroundColor:e||"#2667FF"})}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,r.__)("Text Color","events")),(0,e.createElement)(a.ColorPalette,{value:E,onChange:e=>c({dateBadgeTextColor:e||"#ffffff"})}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,r.__)("Border Color","events")),(0,e.createElement)(a.ColorPalette,{value:b,onChange:e=>c({borderBadgeColor:e||"#00000040"})}))),(0,e.createElement)(n.PanelRow,null,(0,e.createElement)("div",{style:{width:"100%",marginTop:"16px"}},(0,e.createElement)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},(0,r.__)("Weekday Color","events")),(0,e.createElement)(a.ColorPalette,{value:B,onChange:e=>c({weekdayColor:e||"#000000"})}))))),(0,e.createElement)("div",{...h},(0,e.createElement)("div",{className:"evt-border-badge"},(0,e.createElement)("div",{className:"evt-event-date-badge"},(0,e.createElement)("span",{className:"evt-date-day"},w.day),(0,e.createElement)("span",{className:"evt-date-month"},w.month),!p&&"0001"!==w.year&&(0,e.createElement)("span",{className:"evt-date-year"},w.year))),(0,e.createElement)("span",{className:"evt-date-weekday"},w.weekday)))},save:({attributes:t})=>{const{evtBadgeId:n,eventDate:r,isDateSet:l,hideYear:c,dateBadgeBackgroundColor:s,dateBadgeTextColor:i,borderBadgeColor:d,weekdayColor:m}=t,v=a.useBlockProps.save({className:"evt-event-date-badge-container"+(n?` evt-badge-${n}`:""),style:{"--evt-badge-bg":s||"#2667FF","--evt-badge-text":i||"#ffffff","--evt-badge-border":d||"#00000040","--evt-badge-weekday":m||"#000000"}}),g=(e=>{if(!e)return{day:"01",month:"Jan",year:"0001",weekday:"MON"};try{const t=new Date(e);return{day:(0,o.dateI18n)("d",t),month:(0,o.dateI18n)("M",t),year:(0,o.dateI18n)("Y",t),weekday:(0,o.dateI18n)("D",t).toUpperCase()}}catch(e){return{day:"01",month:"Jan",year:"0001",weekday:"MON"}}})(r);return(0,e.createElement)("div",{...v},(0,e.createElement)("div",{className:"evt-border-badge"},(0,e.createElement)("div",{className:"evt-event-date-badge"},(0,e.createElement)("span",{className:"evt-date-day"},g.day),(0,e.createElement)("span",{className:"evt-date-month"},g.month),!c&&"0001"!==g.year&&(0,e.createElement)("span",{className:"evt-date-year"},g.year))),(0,e.createElement)("span",{className:"evt-date-weekday"},g.weekday))}})})();