(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,n=window.wp.element,i=window.wp.blockEditor,r=window.wp.components,a=window.wp.i18n,s=window.wp.data,o=(window.wp.date,e=>{if(!e)return"";const[t,n]=e.split(":");let i=parseInt(t);const r=i>=12?"PM":"AM";return i%=12,i=i||12,`${i}:${n} ${r}`});(0,e.addFilter)("blocks.registerBlockType","evt/paragraph-time-attributes",(e,t)=>"core/paragraph"!==t?e:{...e,attributes:{...e.attributes,evtStartTime:{type:"string",default:"09:00"},evtEndTime:{type:"string",default:"17:00"},evtIsTimeSet:{type:"boolean",default:!1}}});const c=(0,t.createHigherOrderComponent)(e=>t=>{const{attributes:c,setAttributes:m,name:l}=t;if("core/paragraph"!==l||!c.className||!c.className.includes("evt-event-time"))return(0,n.createElement)(e,t);const{evtStartTime:d,evtEndTime:p,evtIsTimeSet:v}=c,u=(0,s.useSelect)(e=>{const{getBlockParents:n,getBlock:i}=e("core/block-editor"),r=n(t.clientId);for(let e of r){const t=i(e);if(t&&"evt/event-item"===t.name)return{clientId:e,startTime:t.attributes.eventStartTime||"09:00",endTime:t.attributes.eventEndTime||"17:00"}}return null},[t.clientId]),w=u?.startTime||d,g=u?.endTime||p,T=(e,t)=>{const n=`${o(e)} â€“ ${o(t)}`;m({content:n})};return(0,n.useEffect)(()=>{u&&v&&T(w,g)},[u?.startTime,u?.endTime]),(0,n.createElement)(n.Fragment,{},(0,n.createElement)(e,t),(0,n.createElement)(i.InspectorControls,{},(0,n.createElement)(r.PanelBody,{title:(0,a.__)("Time Settings","events"),className:"evt-time-settings"},(0,n.createElement)("div",{className:"evt-start-time-input"},(0,n.createElement)("strong",{},(0,a.__)("Start Time","events")),(0,n.createElement)("input",{type:"time",value:w,onChange:e=>{return t=e.target.value,m({evtStartTime:t,evtIsTimeSet:!0}),u&&(0,s.dispatch)("core/block-editor").updateBlockAttributes(u.clientId,{eventStartTime:t}),void T(t,g);var t},onClick:e=>{e.target.showPicker&&e.target.showPicker()}})),(0,n.createElement)("div",{className:"evt-end-time-input"},(0,n.createElement)("strong",{},(0,a.__)("End Time","events")),(0,n.createElement)("input",{type:"time",value:g,onChange:e=>{return t=e.target.value,m({evtEndTime:t,evtIsTimeSet:!0}),u&&(0,s.dispatch)("core/block-editor").updateBlockAttributes(u.clientId,{eventEndTime:t}),void T(w,t);var t},onClick:e=>{e.target.showPicker&&e.target.showPicker()}})))))},"withTimeSettings");(0,e.addFilter)("editor.BlockEdit","evt/paragraph-time-settings",c)})();