(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,n=window.wp.components,l=window.wp.i18n,r=window.wp.date,o=window.wp.element;(0,t.registerBlockType)("evt/events-grid",{title:(0,l.__)("Events Grid","events"),icon:"calendar-alt",category:"widgets",attributes:{columns:{type:"number",default:3}},edit:({attributes:t,setAttributes:r})=>{const{columns:o}=t,c=(0,a.useBlockProps)({className:"evt-events-grid-container",style:{"--columns":o}}),s=window.evtPluginData&&window.evtPluginData.images?[window.evtPluginData.images.crazyDJ||"",window.evtPluginData.images.rockBand||"",window.evtPluginData.images.foodDistribution||""]:["","",""];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Grid Settings","events")},(0,e.createElement)(n.__experimentalNumberControl,{label:(0,l.__)("Columns","events"),value:o,onChange:e=>r({columns:parseInt(e)||3}),min:1,max:6}))),(0,e.createElement)("div",{...c},(0,e.createElement)(a.InnerBlocks,{allowedBlocks:["evt/event-item"],template:[["evt/event-item",{eventImage:s[0],eventImageAlt:"Crazy DJ Experience Santa Cruz",eventDate:"2025-01-06",isDefault:!0,hasImage:!0}],["evt/event-item",{eventImage:s[1],eventImageAlt:"Cute Girls Rock Band Performance",eventDate:"2025-04-04",isDefault:!0,hasImage:!0}],["evt/event-item",{eventImage:s[2],eventImageAlt:"Free Food Distribution At Mumbai",eventDate:"2025-06-08",isDefault:!0,hasImage:!0}]],renderAppender:()=>(0,e.createElement)(a.InnerBlocks.ButtonBlockAppender,null)})))},save:({attributes:t})=>{const{columns:n}=t,l=a.useBlockProps.save({className:"evt-events-grid-container",style:{"--columns":n}});return(0,e.createElement)("div",{...l},(0,e.createElement)(a.InnerBlocks.Content,null))}}),(0,t.registerBlockType)("evt/event-item",{title:(0,l.__)("Event Item","events"),icon:"calendar",category:"widgets",parent:["evt/events-grid"],attributes:{eventImage:{type:"string",default:""},eventImageAlt:{type:"string",default:""},eventDate:{type:"string",default:(()=>{const e=new Date;return(0,r.dateI18n)("Y-m-d",e)})()},detailsBackgroundColor:{type:"string",default:"#ffffff"},dateBadgeBackgroundColor:{type:"string",default:"#2667FF"},dateBadgeTextColor:{type:"string",default:"#ffffff"},borderBadgeColor:{type:"string",default:"#00000040"},isDefault:{type:"boolean",default:!1},hasImage:{type:"boolean",default:!1}},edit:({attributes:t,setAttributes:c,clientId:s})=>{const{eventImage:i,eventImageAlt:d,eventDate:m,detailsBackgroundColor:v,dateBadgeBackgroundColor:g,dateBadgeTextColor:u,borderBadgeColor:p,isDefault:E,hasImage:y}=t;(0,o.useEffect)(()=>{i&&!y&&c({hasImage:!0})},[i]);const h=(0,a.useBlockProps)({className:"evt-event-item"}),k=(e=>{if(!e)return{day:"01",month:"Jan",weekday:"MON"};try{const t=new Date(e);return{day:(0,r.dateI18n)("d",t),month:(0,r.dateI18n)("M",t),weekday:(0,r.dateI18n)("D",t).toUpperCase()}}catch(e){return{day:"01",month:"Jan",weekday:"MON"}}})(m),B=[{title:"Crazy DJ Experience Santa Cruz",description:"Experience an electrifying night of music and entertainment.",time:"9:00 AM - 5:00 PM",location:"JW Marriott, Sector 35",price:"$25.00"},{title:"Cute Girls Rock Band Performance",description:"Join us for an amazing rock music performance.",time:"9:00 AM - 5:00 PM",location:"Club XYZ, Sector 17",price:"$20.00"},{title:"Free Food Distribution At Mumbai",description:"Community service event for food distribution.",time:"9:00 AM - 5:00 PM",location:"Food Corp. Mumbai, Ft. Line",price:"$15.00"}],C=E?d.includes("DJ")?B[0]:d.includes("Rock")?B[1]:d.includes("Food")?B[2]:null:null,b=E&&C?[["core/heading",{level:4,placeholder:(0,l.__)("Event Title","events"),className:"evt-event-title",content:C.title}],["core/paragraph",{placeholder:(0,l.__)("Event Description","events"),className:"evt-event-description",content:C.description}],["core/paragraph",{placeholder:(0,l.__)("Event Time","events"),className:"evt-event-time",content:C.time}],["core/paragraph",{placeholder:(0,l.__)("Event Location","events"),className:"evt-event-location",content:C.location}],["core/paragraph",{placeholder:(0,l.__)("Event Price","events"),className:"evt-event-price",content:C.price}],["core/buttons",{},[["core/button",{text:(0,l.__)("Read More","events"),className:"evt-event-read-more",backgroundColor:"vivid-cyan-blue",url:"#"}]]]]:[["core/heading",{level:4,placeholder:(0,l.__)("Event Title","events"),className:"evt-event-title"}],["core/paragraph",{placeholder:(0,l.__)("Event Description","events"),className:"evt-event-description"}],["core/paragraph",{placeholder:(0,l.__)("9:00 AM - 5:00 PM","events"),className:"evt-event-time"}],["core/paragraph",{placeholder:(0,l.__)("Event Location","events"),className:"evt-event-location"}],["core/paragraph",{placeholder:(0,l.__)("Event Price","events"),className:"evt-event-price"}],["core/buttons",{},[["core/button",{text:(0,l.__)("Read More","events"),className:"evt-event-read-more",backgroundColor:"vivid-cyan-blue",url:"#"}]]]],_=e=>{c({hasImage:e}),e||c({eventImage:"",eventImageAlt:""})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Event Settings","events")},(0,e.createElement)("div",{style:{marginBottom:"15px"}},(0,e.createElement)("strong",null,(0,l.__)("Event Date","events")),(0,e.createElement)(n.DateTimePicker,{currentDate:m,onChange:e=>c({eventDate:e}),is12Hour:!0}))),(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Colors","events"),initialOpen:!1},(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,l.__)("Details Background","events"))),(0,e.createElement)("input",{type:"color",value:v,onChange:e=>c({detailsBackgroundColor:e.target.value}),style:{width:"100%",height:"40px",marginBottom:"10px"}}),(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,l.__)("Date Badge Background","events"))),(0,e.createElement)("input",{type:"color",value:g,onChange:e=>c({dateBadgeBackgroundColor:e.target.value}),style:{width:"100%",height:"40px",marginBottom:"10px"}}),(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,l.__)("Date Badge Text","events"))),(0,e.createElement)("input",{type:"color",value:u,onChange:e=>c({dateBadgeTextColor:e.target.value}),style:{width:"100%",height:"40px",marginBottom:"10px"}}),(0,e.createElement)("p",null,(0,e.createElement)("strong",null,(0,l.__)("Border Color","events"))),(0,e.createElement)("input",{type:"color",value:p,onChange:e=>c({borderBadgeColor:e.target.value}),style:{width:"100%",height:"40px",marginBottom:"10px"}}))),(0,e.createElement)("div",{...h},(0,e.createElement)("div",{className:"evt-event-card"},y?(0,e.createElement)("div",{className:"evt-event-image-wrapper"},i?(0,e.createElement)("div",{className:"evt-event-image"},(0,e.createElement)("img",{src:i,alt:d})):(0,e.createElement)(a.MediaUploadCheck,null,(0,e.createElement)(a.MediaUpload,{onSelect:e=>{c({eventImage:e.url,eventImageAlt:e.alt||e.title})},allowedTypes:["image"],value:i,render:({open:t})=>(0,e.createElement)("div",{className:"evt-event-image",style:{display:"flex",alignItems:"center",justifyContent:"center",background:"#f0f0f0"}},(0,e.createElement)(n.Button,{isPrimary:!0,onClick:t},(0,l.__)("Upload Image","events")))})),(0,e.createElement)("div",{style:{padding:"10px",background:"#fff",borderBottom:"1px solid #ddd",display:"flex",gap:"10px"}},i&&(0,e.createElement)(a.MediaUploadCheck,null,(0,e.createElement)(a.MediaUpload,{onSelect:e=>{c({eventImage:e.url,eventImageAlt:e.alt||e.title})},allowedTypes:["image"],value:i,render:({open:t})=>(0,e.createElement)(n.Button,{isSmall:!0,isSecondary:!0,onClick:t},(0,l.__)("Change Image","events"))})),(0,e.createElement)(n.Button,{isSmall:!0,isSecondary:!0,onClick:()=>_(!1)},(0,l.__)("Remove Image Block","events")))):(0,e.createElement)("div",{style:{padding:"10px",background:"#fff",borderBottom:"1px solid #ddd"}},(0,e.createElement)(n.Button,{isSmall:!0,isSecondary:!0,onClick:()=>_(!0)},(0,l.__)("Add Image Block","events"))),(0,e.createElement)("div",{className:"evt-event-details",style:{backgroundColor:v}},(0,e.createElement)("div",{className:"evt-event-date-badge-container"},(0,e.createElement)("div",{className:"evt-border-badge",style:{borderColor:p}},(0,e.createElement)("div",{className:"evt-event-date-badge",style:{backgroundColor:g,color:u}},(0,e.createElement)("span",{className:"evt-date-day"},k.day),(0,e.createElement)("span",{className:"evt-date-month"},k.month))),(0,e.createElement)("span",{className:"evt-date-weekday"},k.weekday)),(0,e.createElement)("div",{className:"evt-event-details-inner"},(0,e.createElement)(a.InnerBlocks,{template:b,templateLock:!1,allowedBlocks:["core/heading","core/paragraph","core/list","core/buttons","core/button"]}))))))},save:({attributes:t})=>{const{eventImage:n,eventImageAlt:l,eventDate:o,detailsBackgroundColor:c,dateBadgeBackgroundColor:s,dateBadgeTextColor:i,borderBadgeColor:d,hasImage:m}=t,v=a.useBlockProps.save({className:"evt-event-item"}),g=(e=>{if(!e)return{day:"01",month:"Jan",weekday:"MON"};try{const t=new Date(e);return{day:(0,r.dateI18n)("d",t),month:(0,r.dateI18n)("M",t),weekday:(0,r.dateI18n)("D",t).toUpperCase()}}catch(e){return{day:"01",month:"Jan",weekday:"MON"}}})(o);return(0,e.createElement)("div",{...v},(0,e.createElement)("div",{className:"evt-event-card"},m&&n&&(0,e.createElement)("div",{className:"evt-event-image"},(0,e.createElement)("img",{src:n,alt:l})),(0,e.createElement)("div",{className:"evt-event-details",style:{backgroundColor:c}},(0,e.createElement)("div",{className:"evt-event-date-badge-container"},(0,e.createElement)("div",{className:"evt-border-badge",style:{borderColor:d}},(0,e.createElement)("div",{className:"evt-event-date-badge",style:{backgroundColor:s,color:i}},(0,e.createElement)("span",{className:"evt-date-day"},g.day),(0,e.createElement)("span",{className:"evt-date-month"},g.month))),(0,e.createElement)("span",{className:"evt-date-weekday"},g.weekday)),(0,e.createElement)("div",{className:"evt-event-details-inner"},(0,e.createElement)(a.InnerBlocks.Content,null)))))}})})();